# ðŸ— ARt-Pick ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> QR ê¸°ë°˜ Web AR í”Œëž«í¼ì˜ ê¸°ìˆ  ì•„í‚¤í…ì²˜

## ðŸ“Š ì‹œìŠ¤í…œ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ARt-Pick App                           â”‚
â”‚                    (Next.js 14 PWA)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Home   â”‚   â”‚   Map   â”‚   â”‚  Scan   â”‚   â”‚Collectionâ”‚   â”‚
â”‚   â”‚  Page   â”‚   â”‚  Page   â”‚   â”‚  Page   â”‚   â”‚  Page   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚             â”‚             â”‚             â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    Hooks Layer                     â”‚   â”‚
â”‚   â”‚  useAuth â”‚ useGeolocation â”‚ useProximity â”‚ useCollection â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
â”‚        â”‚             â”‚             â”‚             â”‚         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                   Services Layer                   â”‚   â”‚
â”‚   â”‚     Firebase    â”‚    Mapbox    â”‚   QR Scanner     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              External Services           â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  Firebase     â”‚  Mapbox   â”‚  SwiftXR    â”‚
        â”‚  - Auth       â”‚  - Maps   â”‚  - AR View  â”‚
        â”‚  - Firestore  â”‚  - Tiles  â”‚             â”‚
        â”‚  - Hosting    â”‚           â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”„ í•µì‹¬ í”Œë¡œìš°

### 1. ì•± ì‹œìž‘ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App     â”‚â”€â”€â”€â–¶â”‚  ìµëª…    â”‚â”€â”€â”€â–¶â”‚  ìœ„ì¹˜    â”‚â”€â”€â”€â–¶â”‚  Ready   â”‚
â”‚  Launch  â”‚    â”‚  ë¡œê·¸ì¸  â”‚    â”‚  ê¶Œí•œ    â”‚    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ìž‘í’ˆ ìˆ˜ì§‘ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì§€ë„    â”‚â”€â”€â”€â–¶â”‚  ì´ë™    â”‚â”€â”€â”€â–¶â”‚  ê·¼ì ‘    â”‚â”€â”€â”€â–¶â”‚  QR      â”‚
â”‚  í™•ì¸    â”‚    â”‚  (ë„ë³´)  â”‚    â”‚  ê°ì§€    â”‚    â”‚  ìŠ¤ìº”    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìˆ˜ì§‘    â”‚â—€â”€â”€â”€â”‚  ì•±ìœ¼ë¡œ  â”‚â—€â”€â”€â”€â”‚  AR      â”‚â—€â”€â”€â”€â”‚  SwiftXR â”‚
â”‚  ì™„ë£Œ!   â”‚    â”‚  ë³µê·€    â”‚    â”‚  ì²´í—˜    â”‚    â”‚  ì—´ê¸°    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“± íŽ˜ì´ì§€ êµ¬ì¡°

### Home Page (`/`)
- ì•± ì†Œê°œ
- ìˆ˜ì§‘ í˜„í™© ìš”ì•½
- ë¹ ë¥¸ ì‹œìž‘ ë²„íŠ¼

### Map Page (`/map`)
- Mapbox ì „ì²´ í™”ë©´ ì§€ë„
- ì‚¬ìš©ìž í˜„ìž¬ ìœ„ì¹˜ (íŒŒëž€ ì )
- ì•„íŠ¸ìŠ¤íŒŸ ë§ˆì»¤ (ë…¸ëž€ í•€)
- ê±°ë¦¬ ì •ë³´ í‘œì‹œ

### Scan Page (`/scan`)
- ìœ„ì¹˜ ìƒíƒœ í‘œì‹œ
- QR ìŠ¤ìºë„ˆ (100m ì´ë‚´ì—ì„œë§Œ í™œì„±í™”)
- SwiftXR ì—°ë™

### Collection Page (`/collection`)
- ìˆ˜ì§‘í•œ ìž‘í’ˆ ëª©ë¡
- ìž‘í’ˆ ìƒì„¸ ì •ë³´
- AR ë‹¤ì‹œ ë³´ê¸° ë§í¬

## ðŸ—„ ë°ì´í„° ëª¨ë¸

### Firestore êµ¬ì¡°

```
firestore/
â”œâ”€â”€ users/
â”‚   â””â”€â”€ {uid}/
â”‚       â”œâ”€â”€ createdAt: Timestamp
â”‚       â”œâ”€â”€ lastVisit: Timestamp
â”‚       â””â”€â”€ collection/
â”‚           â””â”€â”€ {artworkId}/
â”‚               â”œâ”€â”€ artworkId: string
â”‚               â”œâ”€â”€ spotId: string
â”‚               â”œâ”€â”€ collectedAt: Timestamp
â”‚               â””â”€â”€ location: GeoPoint
```

### TypeScript íƒ€ìž…

```typescript
// ìž‘í’ˆ
interface Artwork {
  id: string;
  title: string;
  titleKo: string;
  description: string;
  descriptionKo: string;
  imageUrl: string;
  arUrl: string;        // SwiftXR URL
  qrCodeUrl: string;    // QR ì½”ë“œ ì´ë¯¸ì§€
}

// ì•„íŠ¸ìŠ¤íŒŸ
interface ArtSpot {
  id: string;
  name: string;
  nameKo: string;
  latitude: number;
  longitude: number;
  radius: number;       // ì¸ì‹ ë°˜ê²½ (ë¯¸í„°)
  artworkId: string;
  address: string;
}

// ìˆ˜ì§‘ ê¸°ë¡
interface CollectionItem {
  artworkId: string;
  spotId: string;
  collectedAt: Date;
  location: {
    latitude: number;
    longitude: number;
  };
}
```

## ðŸ” ë³´ì•ˆ ê·œì¹™

### Firestore Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ì‚¬ìš©ìž ë³¸ì¸ ë°ì´í„°ë§Œ ì ‘ê·¼
    match /users/{userId} {
      allow read, write: if request.auth != null 
                         && request.auth.uid == userId;
      
      match /collection/{docId} {
        allow read, write: if request.auth != null 
                           && request.auth.uid == userId;
      }
    }
  }
}
```

## ðŸ—º ìœ„ì¹˜ ì„œë¹„ìŠ¤

### Geolocation API ì‚¬ìš©

```typescript
// useGeolocation.ts í•µì‹¬ ë¡œì§
const watchPosition = () => {
  navigator.geolocation.watchPosition(
    (position) => {
      setLocation({
        latitude: position.coords.latitude,
        longitude: position.coords.longitude,
        accuracy: position.coords.accuracy
      });
    },
    (error) => {
      setError(error.message);
    },
    {
      enableHighAccuracy: true,
      timeout: 10000,
      maximumAge: 0
    }
  );
};
```

### ê±°ë¦¬ ê³„ì‚° (Haversine)

```typescript
// lib/distance.ts
function getDistance(
  lat1: number, lon1: number,
  lat2: number, lon2: number
): number {
  const R = 6371e3; // ì§€êµ¬ ë°˜ì§€ë¦„ (ë¯¸í„°)
  const Ï†1 = lat1 * Math.PI / 180;
  const Ï†2 = lat2 * Math.PI / 180;
  const Î”Ï† = (lat2 - lat1) * Math.PI / 180;
  const Î”Î» = (lon2 - lon1) * Math.PI / 180;

  const a = Math.sin(Î”Ï†/2) * Math.sin(Î”Ï†/2) +
            Math.cos(Ï†1) * Math.cos(Ï†2) *
            Math.sin(Î”Î»/2) * Math.sin(Î”Î»/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));

  return R * c; // ë¯¸í„° ë‹¨ìœ„
}
```

### ê·¼ì ‘ ê°ì§€ ìƒíƒœ

```typescript
type ProximityStatus = 'far' | 'near' | 'arrived';

// 100m ì´ë‚´ = arrived (ìŠ¤ìº” ê°€ëŠ¥)
// 500m ì´ë‚´ = near (ê°€ê¹Œì›Œì§€ëŠ” ì¤‘)
// 500m ì´ˆê³¼ = far (ë©€ë¦¬ ìžˆìŒ)
```

## ðŸ“· QR ìŠ¤ìºë„ˆ

### html5-qrcode ì„¤ì •

```typescript
// components/scanner/QRScanner.tsx
import { Html5QrcodeScanner } from 'html5-qrcode';

const scanner = new Html5QrcodeScanner(
  "qr-reader",
  {
    fps: 10,
    qrbox: { width: 250, height: 250 },
    aspectRatio: 1.0
  },
  false
);

scanner.render(onScanSuccess, onScanFailure);
```

### QR URL ê²€ì¦

```typescript
function validateSwiftXRUrl(url: string): boolean {
  const pattern = /^https:\/\/seoyoung\.swiftxr\.site\/.+$/;
  return pattern.test(url);
}
```

## ðŸŽ¨ UI ì»´í¬ë„ŒíŠ¸

### ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬

```
Layout
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Logo
â”‚   â””â”€â”€ MenuButton
â”œâ”€â”€ Main (íŽ˜ì´ì§€ë³„ ì½˜í…ì¸ )
â”‚   â”œâ”€â”€ HomePage
â”‚   â”‚   â”œâ”€â”€ HeroSection
â”‚   â”‚   â””â”€â”€ QuickStartButton
â”‚   â”œâ”€â”€ MapPage
â”‚   â”‚   â”œâ”€â”€ MapView
â”‚   â”‚   â”œâ”€â”€ UserMarker
â”‚   â”‚   â”œâ”€â”€ SpotMarker
â”‚   â”‚   â””â”€â”€ DistanceOverlay
â”‚   â”œâ”€â”€ ScanPage
â”‚   â”‚   â”œâ”€â”€ ProximityStatus
â”‚   â”‚   â”œâ”€â”€ QRScanner
â”‚   â”‚   â””â”€â”€ CollectSuccessModal
â”‚   â””â”€â”€ CollectionPage
â”‚       â”œâ”€â”€ CollectionGrid
â”‚       â””â”€â”€ ArtworkCard
â””â”€â”€ BottomNav
    â”œâ”€â”€ NavItem (í™ˆ)
    â”œâ”€â”€ NavItem (ì§€ë„)
    â”œâ”€â”€ NavItem (ìŠ¤ìº”)
    â””â”€â”€ NavItem (ì»¬ë ‰ì…˜)
```

### ë””ìžì¸ í† í°

```typescript
// tailwind.config.js
const colors = {
  primary: '#6366F1',    // ì¸ë””ê³ 
  secondary: '#F59E0B',  // ì•°ë²„ (ì•„íŠ¸ìŠ¤íŒŸ)
  success: '#10B981',    // ìˆ˜ì§‘ ì™„ë£Œ
  background: '#0F172A', // ë‹¤í¬ ë°°ê²½
  surface: '#1E293B',    // ì¹´ë“œ ë°°ê²½
};
```

## ðŸ“¦ ì˜ì¡´ì„±

### í•„ìˆ˜ íŒ¨í‚¤ì§€

```json
{
  "dependencies": {
    "next": "^14.0.0",
    "react": "^18.2.0",
    "firebase": "^10.7.0",
    "mapbox-gl": "^3.0.0",
    "html5-qrcode": "^2.3.8",
    "zustand": "^4.4.0"
  },
  "devDependencies": {
    "typescript": "^5.0.0",
    "tailwindcss": "^3.4.0",
    "@types/mapbox-gl": "^3.0.0"
  }
}
```

## âš¡ ì„±ëŠ¥ ìµœì í™”

### ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

```typescript
// ë™ì  importë¡œ ë²ˆë“¤ í¬ê¸° ìµœì†Œí™”
const MapView = dynamic(() => import('@/components/map/MapView'), {
  ssr: false,
  loading: () => <MapSkeleton />
});

const QRScanner = dynamic(() => import('@/components/scanner/QRScanner'), {
  ssr: false
});
```

### ìºì‹± ì „ëžµ

```typescript
// next.config.js
const nextConfig = {
  images: {
    remotePatterns: [
      { hostname: 'firebasestorage.googleapis.com' }
    ]
  }
};
```

## ðŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              User Device                â”‚
â”‚           (Mobile Browser)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Firebase Hosting               â”‚
â”‚       (Next.js Static Export)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Firestore   â”‚   â”‚   SwiftXR     â”‚
â”‚   (Database)  â”‚   â”‚   (AR Host)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”® í™•ìž¥ ê°€ëŠ¥ì„±

### ë‹¤ì¤‘ ì•„íŠ¸ìŠ¤íŒŸ ì§€ì›

```typescript
// í˜„ìž¬: ë‹¨ì¼ ìŠ¤íŒŸ
const ARTSPOT = { ... };

// í™•ìž¥: ìŠ¤íŒŸ ë°°ì—´ + Firestore
const artspots = await getArtSpots();
const nearbySpots = artspots.filter(
  spot => getDistance(userLocation, spot) < 500
);
```

### ìžì²´ AR ë Œë”ë§

```typescript
// í˜„ìž¬: SwiftXR ì™¸ë¶€ ë§í¬
window.open(arUrl, '_blank');

// í™•ìž¥: A-Frame/AR.js ë‚´ìž¥
<a-scene embedded arjs>
  <a-marker preset="custom" url={markerUrl}>
    <a-entity gltf-model={modelUrl} />
  </a-marker>
</a-scene>
```
